<link rel="import" href="../../imports.html">
<link rel="import" href="../../elements/elements.html">

<polymer-element name="my-claims">
  <template>
    <sidebar-layout selected="home" headerTitle="Home">
      <link rel="stylesheet" href="my-claims.css">
      <firebase-login id="baseLogin" user="{{user}}" statusKnown="{{statusKnown}}" location="https://{{globals.firebase}}.firebaseio.com" provider="google" on-login="{{onLogin}}" on-error="{{onLoginError}}"></firebase-login>
      <firebase-element id="base" location="https://{{globals.firebase}}.firebaseio.com/tickets" data="{{tickets}}" keys="{{keys}}"></firebase-element>
      <pvc-globals values="{{globals}}"></pvc-globals>


<!--        WELCOME DIALOG PROMPTING USER TO SIGN IN-->
      <div class="welcome" hidden?="{{globals.currentUser}}">
        <paper-shadow class="welcome_msg" center-center vertical layout>
          <div id="horfirst" center-center horizontal layout>
            <core-icon icon="info-outline" id="welcome_icon"></core-icon>
            Welcome! You need to sign in to view and submit tickets!
          </div>
          <paper-button on-click="{{login}}" id="btn">LOGIN</paper-button>
        </paper-shadow>
      </div>


  <!--    TICKET FORM TO SUBMIT TICKETS-->
      <div id="ticket_form" center-center vertical layout hidden?="{{!globals.currentUser}}">
        <core-card id="core_card" center horizontal layout center-justified one flex active>Submit your ticket here, {{user.google.displayName}}!</core-card>
        <paper-shadow class="claims_card" z="2" layout one flex vertical>
          <paper-input label="What is your name?" floatinglabel id="name_input"></paper-input>
          <paper-input-decorator label="What room #?" floatinglabel error="is not an actual room number" id="room_check">
            <input id="room_input" is="core-input" pattern="^[A-Ca-c'\d-]*$" on-input="{{inputAction}}">
          </paper-input-decorator>
          <paper-input label="Describe your problem" floatinglabel id="problem_input" vertical layout two flex multiline></paper-input>
          <div id="urgency"><span>How urgent is it?</span></div>
          <paper-slider pin value="1" max="10" id="paper_slider" center horizontal layout start-justified>How urgent is it?</paper-slider>
          <paper-button raised id="paper_button" on-tap="{{claimStuff}} , {{submitQuestion}}"  horizontal layout one flex center center-justified>SUBMIT</paper-button>
        </paper-shadow>
      </div>
      <div>
        <paper-toast text="Ticket received!" id="toast1" class="core-transition-bottom core-transition"></paper-toast>
      </div>
    </sidebar-layout>
  </template>
  <script src="../../scripts/app.js"></script>
</polymer-element>
